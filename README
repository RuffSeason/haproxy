Example:

cd s9s-galera-2.1.0/mysql/scripts/install

install haproxy:

git clone git@github.com:severalnines/haproxy.git

s9s-galera-2.1.0/mysql/scripts/install/haproxy
cd haproxy
./install-haproxy.sh 10.0.1.11 debian galera

The above example installs HaProxy on 10.0.11, using galera 
on an ubuntu/debian platform.

** Check also, you may want to modify parameters here:
   haproxy.cfg.tmpl.debian|rhel 
   You may want to change PASSWORD:       
   user admin insecure-password PASSWORD
   user stats insecure-password PASSWORD

** MySQL Cluster users:
In mysqlchk.sh.mysqlcluster you should change CHECK_QUERY to
make a PRIMARY KEY select that always succeed on an NDB table.

** In install-haproxy.sh
Change the name of the HaProxy (LB_NAME)
and also what mysql port the HaProxy should listen on:
HAPROXY_MYSQL_LISTEN_PORT="33306"
LB_NAME="production"

** Reboot the HAProxy node.
If you don't reboot you will get strange error messages after a while:
Can't connect to MySQL server on '10.0.1.10' (99)
Can't connect to MySQL server on '10.0.1.10' (99)

** Finally, don't forget to GRANT the load balancer host access to the mysql server
E.g, if the LB is installed on 10.0.1.11 do:
GRANT INSERT, SELECT, DELETE, UPDATE ON database.* TO 'johan'@'10.0.1.11' IDENTIFIED BY 'severalnines';

** TODO
You may have to tune your TCP further to avoid http://bugs.mysql.com/bug.php?id=40662 (not a bug, expected behavior) if you open/close connects "too" fast.


EOF
